<!DOCTYPE html>
<html><head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>간단한 웹앱구축  | dev2820 개발일지</title>
    <meta name="description"
        content="dev2820의 개발일지 저장소 '간단한 웹앱구축'을 한 번 살펴보세요.">
    <meta property="og:title" content="간단한 웹앱구축">
    
    <meta property="og:type" content="article">
    <meta property="article:published_time" content="2021-05-16">
    
    <meta property="og:description"
        content="dev2820의 개발일지 저장소 '간단한 웹앱구축'을 한 번 살펴보세요.">
    <meta property="og:url" content="https://dev2820.github.io/projects/holy_shit/%EA%B0%84%EB%8B%A8%ED%95%9C-%EC%9B%B9%EC%95%B1%EA%B5%AC%EC%B6%95/">
    <meta property="og:site_name" content="dev2820 개발일지">
    
    <meta property="og:image" content="https://dev2820.github.io/images/thumbnail.png">
    
    
    <meta property="og:tags" content="프로젝트">
    
    <meta property="og:tags" content="게임">
    
    <meta property="og:tags" content="똥피하기">
    
    <meta property="og:tags" content="로그인폼">
    
    
    <link rel="icon" href="https://dev2820.github.io/images/favicon_32.png" type="image/png" sizes="32x32">
    <link rel="canonical" href="https://dev2820.github.io/projects/holy_shit/%EA%B0%84%EB%8B%A8%ED%95%9C-%EC%9B%B9%EC%95%B1%EA%B5%AC%EC%B6%95/">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap">
    <link rel="stylesheet" href="/css/styles.css">
    
    
    
    
    
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-TTD4CD0DNR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-TTD4CD0DNR');
    </script>
    
    
    
    <script src="/js/default.js"></script>
    
</head>
<body id="body">
        <div id="loader">
            <span class="description">
                loading
            </span>
        </div><div id="topbar" class="card">
  <div class="menus">
    <div class="logo">
      <a href="/">
        
        <img src="/images/site_logo_dark.png" height="32px" width="96px"/>
        
      </a>
    </div>
    <div class="burger">
      <button onclick="event.stopPropagation(); goToUrl('/search')">
        <i class="fa fa-search fa-2x" aria-hidden="true"></i>
      </button>
      <button onclick="event.stopPropagation(); toggleAside(true)">
        <i class="fa fa-bars fa-2x" aria-hidden="true"></i>
      </button>
    </div>
  </div>
</div><aside id="left-aside">
    <div class="profile-container">
        <div class="profile">
    <div class="cover">
        
        <img src="/images/cover.jpg" class="round-card">
        
    </div>
    
    
    <h2>dev2820</h2>
    
    <p>풀스텍 웹개발을 지향합니다</p>
    <div class="center">
        <div class="share">
    <a href ="https://github.com/dev2820">
        <i class="fab fa-github icon"></i>
    </a>
    <a href ="https://mailto:second28200@gmail.com">
        <i class="fas fa-envelope icon"></i>
    </a> 
    <a href ="/index.xml">
        <i class="fas fa-rss icon"></i>
    </a>
</div>
    </div>
</div>
    </div>
    <div class="navigation-container">
        <nav class="aside-menu center">
            <ul>
                <li>
                    <i class="fas fa-home icon"></i>
                    <a href="https://dev2820.github.io/">Home</a>
                </li>
                <li>
                    <i class="fas fa-list icon"></i>
                    <a href="https://dev2820.github.io//categories">Categories</a>
                </li>
                <li>
                    <i class="fas fa-tags icon"></i>
                    <a href="https://dev2820.github.io//tags">Tags</a>
                </li>
                <li>
                    <i class="fas fa-search icon"></i>
                    <a href="https://dev2820.github.io//search">Search</a>
                </li>
                <li>
                    <i class="fas fa-user icon"></i>
                    <a href="https://dev2820.github.io//about">About</a>
                </li>
            </ul>
        </nav>
    </div>
</aside>

<header id="single-header" class="card-inset bg-cover">

  <div class="curtain center">
    <a class="go-back" href="javascript:history.back()"><i class="fas fa-arrow-left icon"></i></a>
    <h1 class="title">간단한 웹앱구축</h1>
    <div class="meta-data appear-300ms">
      <p class="date"> <i class="far fa-calendar icon"></i> 2021.05.16 </p>
      <p class="wordcount"> <i class="far fa-clock icon"></i> 8m</p>
    </div>
  </div>
</header>

<main id="single-main">
  <div class="roller"></div>
  <section id="content" class="appear-700ms">
    <article class="content card">
      <p>만들어진 html,css,js 파일들을 호스팅할 웹앱을 만들어봅시다.</p>
<p>호스팅 환경은 다음과 같습니다.</p>
<h2 id="호스팅-환경">호스팅 환경</h2>
<ul>
<li>라즈베리파이4B</li>
<li>ubuntu server 20.04 LTS</li>
</ul>
<h2 id="웹앱">웹앱</h2>
<p>Nodejs &amp; Express를 사용합니다. nodejs는 js코드 실행기, express는 nodejs 프레임워크입니다.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-1"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-1">1</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm i express-generator -g
</code></pre></td></tr></table>
</div>
</div><p><code>-g</code> 옵션으로 express-generator를 설치합니다. 
그리고 express 앱을 만들어 봅시다. express-generator는 express앱 골격을 만들어주는 모듈입니다.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-1"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-1">1</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">express --view<span style="color:#ff79c6">=</span>ejs myapp
</code></pre></td></tr></table>
</div>
</div><p>express에서 사용할 엔진을 선택합니다. 저는 <code>ejs</code>가 취향이라 <code>ejs</code>를 선택했지만 <code>pug</code>를 사용해도 됩니다. 하지만 ejs파일은 사용하지 않을 예정입니다.</p>
<p>myapp 웹앱이 만들어졌습니다.</p>
<pre><code>┖ myapp
    ┝ bin
        ┖ www
    ┝ public
        ┝ images
        ┝ javascripts
        ┖ stylesheets
    ┝ routes
        ┝ index.js
        ┖ users.js
    ┝ views
        ┝ error.ejs
        ┖ index.ejs
    ┝app.js
    ┖package.json
</code></pre><p>myapp은 위와 같은 구성을 가집니다.</p>
<h3 id="폴더-구성을-살펴보기-전에">폴더 구성을 살펴보기 전에</h3>
<p>express-generator가 생성한 폴더 구조를 살펴보기 전에 간단하게 node의 http 서버에 대해 짚고 넘어갑시다.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-1"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-1">1</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-2"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-2">2</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-3"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-3">3</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-4"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-4">4</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-5"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-5">5</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-6"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-6">6</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-7"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-7">7</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">const</span> http <span style="color:#ff79c6">=</span> require(<span style="color:#f1fa8c">&#39;http&#39;</span>);

<span style="color:#ff79c6">const</span> server <span style="color:#ff79c6">=</span> http.createServer((request, response) =&gt; {
  <span style="color:#6272a4">// request에 대한 response
</span><span style="color:#6272a4"></span>});

server.listen(<span style="color:#bd93f9">3000</span>);
</code></pre></td></tr></table>
</div>
</div><p><div style="color:#999999; text-align:center">- node의 서버 생성 -</div>
    
node.js로 생성하는 http 서버는 대충 이런 모양입니다. <code>createServer</code>에 달아준 콜백함수에 request 파라미터로 http 요청(<code>http:// ~~</code>)이 들어오고 request 에 대한 응답을 response 객체를 통해 보내는 형식입니다. express는 http.createServer에 파라미터로 전달할 콜백 함수에 해당합니다.</p>
<p>nodejs에 대해 더 알아보고 싶다면 다음 링크를 참고해주세요
<i class="fas fa-link"></i>
<a target="_blank" href="https://nodejs.org/ko/docs/guides/anatomy-of-an-http-transaction/">
    
nodejs 공식 홈페이지: HTTP 트렌젝션 해부

</a></p>
<p>자 그럼 폴더 구조를 살펴봅시다.</p>
<h3 id="binwww">bin/www</h3>
<p><code>www</code> 파일을 보기전에 <code>package.json</code> 파일을 열어보면 다음과 같습니다.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-1"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-1"> 1</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-2"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-2"> 2</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-3"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-3"> 3</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-4"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-4"> 4</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-5"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-5"> 5</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-6"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-6"> 6</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-7"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-7"> 7</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-8"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-8"> 8</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-9"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-9"> 9</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-10"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-10">10</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-11"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-11">11</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-12"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-12">12</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-13"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-13">13</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-14"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-14">14</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-15"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-15">15</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-16"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-16">16</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-17"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-17">17</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-18"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-18">18</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
  <span style="color:#ff79c6">&#34;name&#34;</span>: <span style="color:#f1fa8c">&#34;myapp&#34;</span>,
  <span style="color:#ff79c6">&#34;version&#34;</span>: <span style="color:#f1fa8c">&#34;0.0.0&#34;</span>,
  <span style="color:#ff79c6">&#34;private&#34;</span>: <span style="color:#ff79c6">true</span>,
  <span style="color:#ff79c6">&#34;scripts&#34;</span>: {
    <span style="color:#ff79c6">&#34;start&#34;</span>: <span style="color:#f1fa8c">&#34;node ./bin/www&#34;</span>  // *
  },
  <span style="color:#ff79c6">&#34;dependencies&#34;</span>: {
    <span style="color:#ff79c6">&#34;cookie-parser&#34;</span>: <span style="color:#f1fa8c">&#34;~1.4.4&#34;</span>,
    <span style="color:#ff79c6">&#34;debug&#34;</span>: <span style="color:#f1fa8c">&#34;~2.6.9&#34;</span>,
    <span style="color:#ff79c6">&#34;ejs&#34;</span>: <span style="color:#f1fa8c">&#34;~2.6.1&#34;</span>,
    <span style="color:#ff79c6">&#34;express&#34;</span>: <span style="color:#f1fa8c">&#34;~4.16.1&#34;</span>,
    <span style="color:#ff79c6">&#34;express-session&#34;</span>: <span style="color:#f1fa8c">&#34;^1.17.1&#34;</span>,
    <span style="color:#ff79c6">&#34;fs&#34;</span>: <span style="color:#f1fa8c">&#34;*&#34;</span>,
    <span style="color:#ff79c6">&#34;http-errors&#34;</span>: <span style="color:#f1fa8c">&#34;~1.6.3&#34;</span>,
    <span style="color:#ff79c6">&#34;morgan&#34;</span>: <span style="color:#f1fa8c">&#34;~1.9.1&#34;</span>
  }
}
</code></pre></td></tr></table>
</div>
</div><p>scripts 객체 내부에 start String이 정의되어있는데, <code>node ./bin/www</code>라고 되어있습니다. package.json에 이렇게 npm 명령어를 정의해두면 npm 명령을 통해 간편하게 서버를 실행할 수 있습니다.
shell에 <code>npm start</code>를 입력하면 이는 <code>node ./bin/www</code>를 실행한 것과 같은 효과를 냅니다.</p>
<p><code>node ./bin/www</code> 는 <code>bin/www</code> 파일을 node.js로 실행하는 명령입니다.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-1"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-1"> 1</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-2"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-2"> 2</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-3"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-3"> 3</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-4"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-4"> 4</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-5"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-5"> 5</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-6"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-6"> 6</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-7"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-7"> 7</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-8"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-8"> 8</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-9"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-9"> 9</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-10"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-10">10</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-11"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-11">11</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-12"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-12">12</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-13"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-13">13</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-14"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-14">14</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-15"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-15">15</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-16"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-16">16</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-17"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-17">17</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-18"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-18">18</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-19"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-19">19</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-20"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-20">20</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-21"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-21">21</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-22"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-22">22</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-23"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-23">23</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-24"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-24">24</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-25"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-25">25</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-26"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-26">26</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">//...생략...
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">var</span> app <span style="color:#ff79c6">=</span> require(<span style="color:#f1fa8c">&#39;../app&#39;</span>);
<span style="color:#8be9fd;font-style:italic">var</span> debug <span style="color:#ff79c6">=</span> require(<span style="color:#f1fa8c">&#39;debug&#39;</span>)(<span style="color:#f1fa8c">&#39;myapp:server&#39;</span>);
<span style="color:#8be9fd;font-style:italic">var</span> http <span style="color:#ff79c6">=</span> require(<span style="color:#f1fa8c">&#39;http&#39;</span>);

<span style="color:#6272a4">/**
</span><span style="color:#6272a4"> * Get port from environment and store in Express.
</span><span style="color:#6272a4"> */</span>

<span style="color:#8be9fd;font-style:italic">var</span> port <span style="color:#ff79c6">=</span> normalizePort(process.env.PORT <span style="color:#ff79c6">||</span> <span style="color:#f1fa8c">&#39;3000&#39;</span>); <span style="color:#6272a4">//port는 환경변수 PORT, PORT가 없으면 default 3000으로 설정된다.
</span><span style="color:#6272a4"></span>app.set(<span style="color:#f1fa8c">&#39;port&#39;</span>, port); <span style="color:#6272a4">//port 번호 설정
</span><span style="color:#6272a4"></span>
<span style="color:#6272a4">/**
</span><span style="color:#6272a4"> * Create HTTP server.
</span><span style="color:#6272a4"> */</span>

<span style="color:#8be9fd;font-style:italic">var</span> server <span style="color:#ff79c6">=</span> http.createServer(app); <span style="color:#6272a4">// 서버 생성. 
</span><span style="color:#6272a4"></span>
<span style="color:#6272a4">/**
</span><span style="color:#6272a4"> * Listen on provided port, on all network interfaces.
</span><span style="color:#6272a4"> */</span>

server.listen(port); <span style="color:#6272a4">// server는 이제 3000번 포트로 오는 http request에 대한 response을 하게 된다.
</span><span style="color:#6272a4"></span>server.on(<span style="color:#f1fa8c">&#39;error&#39;</span>, onError);
server.on(<span style="color:#f1fa8c">&#39;listening&#39;</span>, onListening);
<span style="color:#6272a4">//...생략...
</span></code></pre></td></tr></table>
</div>
</div><div style="color:#999999; text-align:center">- bin/www 파일 내용 일부 -</div>
    
<p>대충 app.js 모듈을 http로 실행하는 내용이 담겨있습니다. 즉 <code>node ./bin/www</code> 명령은 http 서버를 생성하고 http request에 대한 응답을 app.js 모듈에게 맡깁니다.</p>
<p>결국 <code>npm start</code> 명령은 서버를 실행시키는 명령입니다. 물론 package.json의 scripts를 수정해 다른 명령으로 서버를 실행시킬 수도 있습니다.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-1"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-1">1</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-2"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-2">2</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># 서버 실행</span>
npm start
</code></pre></td></tr></table>
</div>
</div><h3 id="public">public</h3>
<p>보통 호스팅할 파일들을 담는 폴더로 사용합니다. <code>app.js</code>를 먼저 살펴봅시다.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-1"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-1">1</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-2"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-2">2</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-3"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-3">3</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-4"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-4">4</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-5"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-5">5</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">//...
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">var</span> app <span style="color:#ff79c6">=</span> express();
<span style="color:#6272a4">//...
</span><span style="color:#6272a4"></span>app.use(express.<span style="color:#ff79c6">static</span>(path.join(__dirname, <span style="color:#f1fa8c">&#39;public&#39;</span>)));
<span style="color:#6272a4">//...
</span></code></pre></td></tr></table>
</div>
</div><p><div style="color:#999999; text-align:center">- app.js -</div>
    
코드 중간에 <code>express.static</code>을 app에 등록하는 코드가 있습니다. 이렇게 express에서는 express에 <strong>미들웨어</strong>를 등록할 수 있습니다. 미들웨어는 요청 또는 express를 설정/가공하는 중간 단계 입니다.</p>
<figure role="img">
    <img src="images/express_middleware.png" alt="express workflow">
    <figcaption>- 
출처: https://medium.com/@viral_shah/express-middlewares-demystified-f0c2c37ea6a1
 -</figcaption>
</figure>
<br/>
<p>위 그림에서 처럼 express로 들어온 요청은 미들웨어와 라우터를 거치며 순서대로 실행됩니다. 미들웨어는 요청을 가공하거나 express에 대한 설정을 추가해 다음 미들웨어/라우터로 전달합니다.
라우터는 아래에서 설명하겠습니다.</p>
<p>미들웨어 2개만 살펴봅시다.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-1"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-1">1</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-2"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-2">2</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-3"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-3">3</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-4"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-4">4</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">//...
</span><span style="color:#6272a4"></span>app.use(express.json());
app.use(express.urlencoded({ extended<span style="color:#ff79c6">:</span> <span style="color:#ff79c6">false</span> }));
<span style="color:#6272a4">//...
</span></code></pre></td></tr></table>
</div>
</div><p>app.js를 보면 위와 같은 코드가 있는데 각각 다음과 같습니다.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-1"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-1">1</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">app.use(express.json()); <span style="color:#6272a4">// json 형식의 request body를 읽을 수 있도록 설정하는 미들웨어
</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-1"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-1">1</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">app.use(express.urlencoded({ extended<span style="color:#ff79c6">:</span> <span style="color:#ff79c6">false</span> })); <span style="color:#6272a4">// url의 쿼리문 parsing에 queryString 모듈을 사용하도록 설정하는 미들웨어
</span></code></pre></td></tr></table>
</div>
</div><p>대충 request를 변형하거나 express에 뭔가 설정해주는 내용입니다.
그럼 아래 미들웨어 무슨 기능을 할까요.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-1"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-1">1</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">app.use(express.<span style="color:#ff79c6">static</span>(path.join(__dirname, <span style="color:#f1fa8c">&#39;public&#39;</span>)));
</code></pre></td></tr></table>
</div>
</div><p>바로 <code>public</code>폴더를 <strong>정적 파일이 담긴 폴더</strong>로 설정해줍니다.</p>
<p><code>index.html</code>에 <code>images/welcome.png</code>,<code>style.css</code>,<code>models.js</code>가 사용된다고 합시다. <code>npm start</code>로 서버를 생성했겠죠. 그리고 서버는  <code>localhost:3000/</code> 요청을 받으면 <code>index.html</code>파일을 호스팅한다고 합시다.</p>
<p>서버를 실행하고 <code>http://localhost:3000/</code> 주소에 접속하게되면 브라우저는 <code>localhost:3000/</code> http 요청을 서버로 보냅니다. 서버는 <code>index.html</code> 파일 내용을 브라우저로 전송하고
브라우저는 받은 <code>index.html</code>을 화면에 렌더링합니다. 렌더링된 <code>index.html</code>은 <code>images/welcome.png</code>,<code>style.css</code>,<code>models.js</code> 파일이 필요하므로 서버에 다시 이 파일들을 전송해 달라고 요청합니다.</p>
<ul>
<li>localhost:3000/images/welcome.png</li>
<li>localhost:3000/style.css</li>
<li>localhost:3000/models.js</li>
</ul>
<p>위의 요청이 다시 발생하게 되죠.</p>
<p>만약 서버에 저 요청들에 대한 응답을 모두 달아놨다면 문제가 없겠지만, 우리는 저 요청들에 하나하나 응답을 달 수 없습니다. index.html이 바뀌면 또 서버를 대거 수정해야 하니까요. 
너무나 비효율적인 방법입니다.</p>
<p>그래서 우리는 서버에 정적 폴더를 선언하고 필요한 정적 파일들을 이 폴더에서 꺼내가도록 설정합니다. 위의 express.static 미들웨어가 그런 역할을 합니다. public으로부터 정적 파일들을 꺼내가라고 
설정해주는거죠. 이제 <code>localhost:3000/images/welcome.png</code>, <code>localhost:3000/style.css</code> 같은 정적 파일을 요청하게 되면 <code>public/images/welcome.png</code>, <code>public/style.css</code> 파일로 응답하게 됩니다.</p>
<h3 id="routes">routes</h3>
<p><code>routes</code>폴더는 라우터가 담기는 폴더입니다. 라우터는 요청의 분기문의 역할을 한다고 생각하면 됩니다. 예를 들어 요청이 <code>/users</code>로 시작하면 특정 소스를 실행하고 <code>/index</code>로 시작하면 다른 소스를 시행하는 식으로 말입니다.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-1"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-1">1</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-2"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-2">2</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-3"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-3">3</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-4"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-4">4</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-5"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-5">5</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-6"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-6">6</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-7"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-7">7</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">//...
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">var</span> indexRouter <span style="color:#ff79c6">=</span> require(<span style="color:#f1fa8c">&#39;./routes/index&#39;</span>);
<span style="color:#8be9fd;font-style:italic">var</span> usersRouter <span style="color:#ff79c6">=</span> require(<span style="color:#f1fa8c">&#39;./routes/users&#39;</span>);
<span style="color:#6272a4">//...
</span><span style="color:#6272a4"></span>app.use(<span style="color:#f1fa8c">&#39;/&#39;</span>, indexRouter);
app.use(<span style="color:#f1fa8c">&#39;/users&#39;</span>, usersRouter);
<span style="color:#6272a4">//...
</span></code></pre></td></tr></table>
</div>
</div><p>app.js에 포함된 라우터 코드입니다. 모듈을 가져와 라우터로 등록하고 있습니다. 요청이 <code>/</code>로 시작하면 <code>indexRouter</code>가, <code>/users</code>로 시작하면 <code>usersRouter</code>가 실행되는 방식입니다.
<code>./routes/index.js</code>를 한번 봅시다.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-1"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-1">1</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-2"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-2">2</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-3"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-3">3</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-4"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-4">4</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-5"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-5">5</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-6"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-6">6</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-7"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-7">7</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-8"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-8">8</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-9"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-9">9</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">var</span> express <span style="color:#ff79c6">=</span> require(<span style="color:#f1fa8c">&#39;express&#39;</span>);
<span style="color:#8be9fd;font-style:italic">var</span> router <span style="color:#ff79c6">=</span> express.Router();

<span style="color:#6272a4">/* GET home page. */</span>
router.get(<span style="color:#f1fa8c">&#39;/&#39;</span>, <span style="color:#8be9fd;font-style:italic">function</span>(req, res, next) {
  res.render(<span style="color:#f1fa8c">&#39;index&#39;</span>, { title<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#39;Express&#39;</span> });
});

module.exports <span style="color:#ff79c6">=</span> router;
</code></pre></td></tr></table>
</div>
</div><div style="color:#999999; text-align:center">- routes/index.js -</div>
    
<p><code>express.Router()</code>로 라우터 객체를 생성하고, 요청에 대한 응답을 달아주고 있습니다. 위 코드는 <code>/</code>경로의 GET 요청에 대한 응답을 달아주고 있습니다. <code>localhost:3000/</code>에 접속하면 위의 <code>router.get ~</code> 부분이 실행되는 겁니다. 콜백함수의 파라미터는 req,res,next가 있는데, req엔 request 정보가 담겨있고, res는 response 객체입니다. res를 통해 요청에 대한 응답을 보내줄 수 있습니다. next까지 설명하면 설명할게 너무 많아지므로 패스하겠습니다. 일단은 미들웨어가 다음 미들웨어/라우터로 요청을 넘겨줄 때 사용하는 메소드라고 생각하면 됩니다.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-1"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-1"> 1</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-2"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-2"> 2</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-3"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-3"> 3</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-4"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-4"> 4</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-5"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-5"> 5</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-6"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-6"> 6</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-7"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-7"> 7</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-8"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-8"> 8</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-9"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-9"> 9</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-10"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-10">10</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-11"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-11">11</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-12"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-12">12</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-13"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-13">13</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">var</span> express <span style="color:#ff79c6">=</span> require(<span style="color:#f1fa8c">&#39;express&#39;</span>);
<span style="color:#8be9fd;font-style:italic">var</span> router <span style="color:#ff79c6">=</span> express.Router();

<span style="color:#6272a4">/* GET home page. */</span>
router.get(<span style="color:#f1fa8c">&#39;/&#39;</span>, <span style="color:#8be9fd;font-style:italic">function</span>(req, res, next) {
  res.render(<span style="color:#f1fa8c">&#39;index&#39;</span>, { title<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#39;Express&#39;</span> });
});
<span style="color:#6272a4">/* 새로 추가한 코드 */</span>
router.get(<span style="color:#f1fa8c">&#39;/users&#39;</span>, <span style="color:#8be9fd;font-style:italic">function</span>(req, res, next) {
  res.render(<span style="color:#f1fa8c">&#39;index&#39;</span>, { title<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#39;Users&#39;</span> });
});

module.exports <span style="color:#ff79c6">=</span> router;
</code></pre></td></tr></table>
</div>
</div><p>만약 위와 같이 <code>./routes/index.js</code>를 수정한다고 합시다. 그리고 <code>localhost:3000/users</code> 요청을 보냈다고 합시다. indexRouter를 usersRouter보다 먼저 달아놨고 <code>/users</code>요청은 <code>/</code>로 시작하는 요청에 부합하기 때문에 요청은 indexRouter로 들어옵니다. 그리고 새로 추가한 코드가 실행되겠죠. <code>res.render('index, { title: 'Users'});</code> 가 실행됩니다. 이 코드는 response를 보내는 명령 중 하나입니다.그럼 usersRouter는 어떻게 될까요. 실행되지 않습니다. 이미 요청에 대한 응답이 끝났기 때문에 그 다음 라우터/미들웨어는 실행되지 않습니다.</p>
<h3 id="views">views</h3>
<p><code>./routes/index.js</code>를 보면 <code>res.render</code> 코드가 보일겁니다. 이 render 메소드는 템플릿파일을 렌더링해 응답하는 메소드입니다.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-1"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-1">1</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-2"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-2">2</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-3"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-3">3</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#6272a4">// view engine setup
</span><span style="color:#6272a4"></span>app.set(<span style="color:#f1fa8c">&#39;views&#39;</span>, path.join(__dirname, <span style="color:#f1fa8c">&#39;views&#39;</span>));
app.set(<span style="color:#f1fa8c">&#39;view engine&#39;</span>, <span style="color:#f1fa8c">&#39;ejs&#39;</span>);
</code></pre></td></tr></table>
</div>
</div><p>app.js를 보면 위와 같은 코드가 있습니다. views 폴더를 템플릿파일이 담긴 폴더로 지정하고 템플릿 엔진을 ejs로 설정하는 부분입니다. 초반에 express-generator를 실행할 때 <code>--view=ejs</code>로 템플릿 언어를 ejs로 설정했기 때문에 생긴 코드입니다.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-1"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-1">1</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">express --view<span style="color:#ff79c6">=</span>ejs myapp
</code></pre></td></tr></table>
</div>
</div><div style="color:#999999; text-align:center">- 스크롤해서 올려보지 말고 이거 보라구 -</div>
    
<p>템플릿 언어는 마크업언어에 특정 언어를 덧붙여 프로그래밍이 가능하도록 만든 언어입니다. 마크업기능과 프로그래밍기능을 모두 가지게되죠. 대표적으로 JSP가 있습니다.(Html + Java)
ejs는 Html + JavaScript 입니다. views/index.html 파일을 살펴봅시다.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-1"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-1"> 1</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-2"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-2"> 2</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-3"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-3"> 3</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-4"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-4"> 4</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-5"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-5"> 5</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-6"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-6"> 6</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-7"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-7"> 7</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-8"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-8"> 8</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-9"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-9"> 9</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-10"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-10">10</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-11"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-11">11</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-12"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-12">12</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-13"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-13">13</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-14"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-14">14</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-15"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-15">15</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-16"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-16">16</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-17"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-17">17</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-18"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-18">18</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-19"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-19">19</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-20"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-20">20</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-21"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-21">21</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-22"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-22">22</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#ff79c6">&lt;!DOCTYPE html&gt;</span>
&lt;<span style="color:#ff79c6">html</span>&gt;
  &lt;<span style="color:#ff79c6">head</span>&gt;
    &lt;<span style="color:#ff79c6">title</span>&gt;&lt;%= title %&gt;&lt;/<span style="color:#ff79c6">title</span>&gt;
    &lt;<span style="color:#ff79c6">link</span> <span style="color:#50fa7b">rel</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#39;stylesheet&#39;</span> <span style="color:#50fa7b">href</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#39;/stylesheets/style.css&#39;</span> /&gt;
  &lt;/<span style="color:#ff79c6">head</span>&gt;
  &lt;<span style="color:#ff79c6">body</span>&gt;
    &lt;<span style="color:#ff79c6">h1</span>&gt;&lt;%= title %&gt;&lt;/<span style="color:#ff79c6">h1</span>&gt;
    &lt;<span style="color:#ff79c6">p</span>&gt;Welcome to &lt;%= title %&gt;&lt;/<span style="color:#ff79c6">p</span>&gt;
    &lt;<span style="color:#ff79c6">form</span> <span style="color:#50fa7b">action</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;/signup&#34;</span> <span style="color:#50fa7b">method</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;post&#34;</span>&gt;&lt;/<span style="color:#ff79c6">form</span>&gt;
    &lt;<span style="color:#ff79c6">p</span>&gt;
      id : &lt;<span style="color:#ff79c6">input</span> <span style="color:#50fa7b">type</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;text&#34;</span> <span style="color:#50fa7b">placeholder</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;Please input your ID.&#34;</span> <span style="color:#50fa7b">name</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;ID&#34;</span>&gt;
    &lt;/<span style="color:#ff79c6">p</span>&gt;
    &lt;<span style="color:#ff79c6">p</span>&gt;
      password : &lt;<span style="color:#ff79c6">input</span> <span style="color:#50fa7b">type</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;password&#34;</span> <span style="color:#50fa7b">placeholder</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;Please input your password.&#34;</span> <span style="color:#50fa7b">name</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;password&#34;</span>&gt;
    &lt;/<span style="color:#ff79c6">p</span>&gt;
    &lt;<span style="color:#ff79c6">p</span>&gt;

      &lt;<span style="color:#ff79c6">input</span> <span style="color:#50fa7b">type</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;submit&#34;</span> <span style="color:#50fa7b">id</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;submit_button&#34;</span>&gt;&lt;/<span style="color:#ff79c6">input</span>&gt;
    &lt;/<span style="color:#ff79c6">p</span>&gt;
  &lt;/<span style="color:#ff79c6">body</span>&gt;
&lt;/<span style="color:#ff79c6">html</span>&gt;
</code></pre></td></tr></table>
</div>
</div><p>위의 <code>&lt;%=&gt;</code> 같은 부분이 자바스크립트가 사용되는 코드입니다. res.render 메소드가 이 파일에 js를 적용해 완성된 html을 만들고 응답한다고 생각하면 됩니다.
근데 템플릿 파일은 이번에 사용하지 않을거라서 여기까지만 알고 넘어갑시다.</p>
<h2 id="마치며">마치며</h2>
<p>원래는 로그인 페이지를 호스팅하는 코드까지 작성해보는게 목표이었는데 글이 길어져서 한번 끊고 가야겠네요.<br>
다음 글은 login.html과 signup.html을 호스팅하도록 코드를 수정하고 로그인기능을 넣어보는 내용이 될 것 같습니다.</p>

    </article>
    <aside id="right-aside">
      <div class="post-toc card" id="post-toc">
    <div class="post-toc-title">
        <span>차례</span>
    </div>
    <div id="table">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#호스팅-환경">호스팅 환경</a></li>
    <li><a href="#웹앱">웹앱</a>
      <ul>
        <li><a href="#폴더-구성을-살펴보기-전에">폴더 구성을 살펴보기 전에</a></li>
        <li><a href="#binwww">bin/www</a></li>
        <li><a href="#public">public</a></li>
        <li><a href="#routes">routes</a></li>
        <li><a href="#views">views</a></li>
      </ul>
    </li>
    <li><a href="#마치며">마치며</a></li>
  </ul>
</nav>
    </div>
</div>
    </aside>
  </section>
  <section id="section-move">
    <nav class="section-move">
    
      <a href="https://dev2820.github.io/projects/holy_shit/htmlcss%EB%A1%9C-%EA%B0%84%EB%8B%A8%ED%95%9C-%ED%99%94%EB%A9%B4-%EB%A7%8C%EB%93%A4%EA%B8%B0/" class="previous card"> 
        <i class="fas fa-angle-double-left icon slide-left"></i>
        <div class="title">
          <small>prev</small>
          <span>Html,css로 간단한 화면 만들기 1</span>
        </div>
      </a>
    
    
</nav>
  
  </section>
  <section id="meta">
    <div class="card">
      
      
<div class="category_breadcrumb_title">
    <h2 class="title"><i class="fas fa-folder icon"></i>Categories</h2>
</div>
<div class="category_breadcrumb">
    <a href="https://dev2820.github.io/categories/projects" class="action name">
        
        projects
    </a>
    <span class="action slash">/</span>
    
    <a href="https://dev2820.github.io/subcategories/holy_shit" class="action name">
        
        <span class="name">Holy shit</span>     
    </a>
    
</div>


      <div class="tag_list_title">
    <h2 class="title"><i class="fas fa-hashtag icon"></i>Tags</h2>
</div>
<ul class="tags tag_list">
    
        <li><a href="https://dev2820.github.io/tags/%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8/" class="action"><i class="fas fa-hashtag icon"></i>프로젝트</a></li>
    
        <li><a href="https://dev2820.github.io/tags/%EA%B2%8C%EC%9E%84/" class="action"><i class="fas fa-hashtag icon"></i>게임</a></li>
    
        <li><a href="https://dev2820.github.io/tags/%EB%98%A5%ED%94%BC%ED%95%98%EA%B8%B0/" class="action"><i class="fas fa-hashtag icon"></i>똥피하기</a></li>
    
        <li><a href="https://dev2820.github.io/tags/%EB%A1%9C%EA%B7%B8%EC%9D%B8%ED%8F%BC/" class="action"><i class="fas fa-hashtag icon"></i>로그인폼</a></li>
    
</ul>

      <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "dev2820-github-io" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
  </section>
</main>

  <footer id="footer" class="bg-cover" style="background-image:url(/images/footer.png)">
    <button onclick="scrollToTop()" class="scroll-to-top card">
      <i class="fas fa-angle-double-up icon"></i>
    </button>
    <button onclick="scrollToBottom()" class="scroll-to-bottom card">
      <i class="fas fa-angle-double-down icon"></i>
    </button>
    
    <div class="center"><div class="share">
    <a href ="https://github.com/dev2820">
        <i class="fab fa-github icon"></i>
    </a>
    <a href ="https://mailto:second28200@gmail.com">
        <i class="fas fa-envelope icon"></i>
    </a> 
    <a href ="/index.xml">
        <i class="fas fa-rss icon"></i>
    </a>
</div><div class="copyright center">
        <span>COPYRIGHT 2021-2021. <a href="https://dev2820.github.io"> GIJO YANG (DEV2820).</a></span>
        <span>ALL RIGHTS RESERVED.</span>
      </div>
    </div>
  </footer>
</body>
</html>
  <script id="dsq-count-scr" src="//dev2820-github-io.disqus.com/count.js" async></script>
    </body>
</html>

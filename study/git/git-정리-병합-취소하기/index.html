<!DOCTYPE html>
<html><head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[Git 정리] 병합 취소하기  | dev2820 개발일지</title>
    <meta name="description"
        content="dev2820의 개발일지 저장소 '[Git 정리] 병합 취소하기'을 한 번 살펴보세요.">
    <meta property="og:title" content="[Git 정리] 병합 취소하기">
    
    <meta property="og:type" content="article">
    <meta property="article:published_time" content="2021-03-31">
    
    <meta property="og:description"
        content="dev2820의 개발일지 저장소 '[Git 정리] 병합 취소하기'을 한 번 살펴보세요.">
    <meta property="og:url" content="https://dev2820.github.io/study/git/git-%EC%A0%95%EB%A6%AC-%EB%B3%91%ED%95%A9-%EC%B7%A8%EC%86%8C%ED%95%98%EA%B8%B0/">
    <meta property="og:site_name" content="dev2820 개발일지">
    
    <meta property="og:image" content="https://dev2820.github.io/images/thumbnail.png">
    
    
    <meta property="og:tags" content="study">
    
    <meta property="og:tags" content="컴퓨터 기술">
    
    <meta property="og:tags" content="공부정리">
    
    <meta property="og:tags" content="Git">
    
    <meta property="og:tags" content="버전관리">
    
    
    <link rel="icon" href="https://dev2820.github.io/images/favicon_32.png" type="image/png" sizes="32x32">
    <link rel="canonical" href="https://dev2820.github.io/study/git/git-%EC%A0%95%EB%A6%AC-%EB%B3%91%ED%95%A9-%EC%B7%A8%EC%86%8C%ED%95%98%EA%B8%B0/">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap">
    <link rel="stylesheet" href="/css/styles.css">
    
    
    
    
    
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-TTD4CD0DNR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-TTD4CD0DNR');
    </script>
    
    
    
    <script src="/js/default.js"></script>
    
</head>
<body id="body">
        <div id="loader">
            <span class="description">
                loading
            </span>
        </div><div id="topbar" class="card">
  <div class="menus">
    <div class="logo">
      <a href="/">
        
        <img src="/images/site_logo_dark.png" height="32px" width="96px"/>
        
      </a>
    </div>
    <div class="burger">
      <button onclick="event.stopPropagation(); goToUrl('/search')">
        <i class="fa fa-search fa-2x" aria-hidden="true"></i>
      </button>
      <button onclick="event.stopPropagation(); toggleAside(true)">
        <i class="fa fa-bars fa-2x" aria-hidden="true"></i>
      </button>
    </div>
  </div>
</div><aside id="left-aside">
    <div class="profile-container">
        <div class="profile">
    <div class="cover">
        
        <img src="/images/cover.jpg" class="round-card">
        
    </div>
    
    
    <h2>dev2820</h2>
    
    <p>풀스텍 웹개발을 지향합니다</p>
    <div class="center">
        <div class="share">
    <a href ="https://github.com/dev2820">
        <i class="fab fa-github icon"></i>
    </a>
    <a href ="https://mailto:second28200@gmail.com">
        <i class="fas fa-envelope icon"></i>
    </a> 
    <a href ="/index.xml">
        <i class="fas fa-rss icon"></i>
    </a>
</div>
    </div>
</div>
    </div>
    <div class="navigation-container">
        <nav class="aside-menu center">
            <ul>
                <li>
                    <i class="fas fa-home icon"></i>
                    <a href="https://dev2820.github.io/">Home</a>
                </li>
                <li>
                    <i class="fas fa-list icon"></i>
                    <a href="https://dev2820.github.io//categories">Categories</a>
                </li>
                <li>
                    <i class="fas fa-tags icon"></i>
                    <a href="https://dev2820.github.io//tags">Tags</a>
                </li>
                <li>
                    <i class="fas fa-search icon"></i>
                    <a href="https://dev2820.github.io//search">Search</a>
                </li>
                <li>
                    <i class="fas fa-user icon"></i>
                    <a href="https://dev2820.github.io//about">About</a>
                </li>
            </ul>
        </nav>
    </div>
</aside>

<header id="single-header" class="card-inset bg-cover">

  <div class="curtain center">
    <a class="go-back" href="javascript:history.back()"><i class="fas fa-arrow-left icon"></i></a>
    <h1 class="title">[Git 정리] 병합 취소하기</h1>
    <div class="meta-data appear-300ms">
      <p class="date"> <i class="far fa-calendar icon"></i> 2021.03.31 </p>
      <p class="wordcount"> <i class="far fa-clock icon"></i> 3m</p>
    </div>
  </div>
</header>

<main id="single-main">
  <div class="roller"></div>
  <section id="content" class="appear-700ms">
    <article class="content card">
      <p>이번 글에서는 병합을 취소하는 명령어들을 배웁니다.</p>
<h2 id="reset을-이용한-병합-취소"><code>reset</code>을 이용한 병합 취소</h2>
<p>병합이 일어난 직후엔 git엔 ORIG_HEAD라는 새로운 참조 commit을 가집니다. 혹여나 실수로 병합을 한 경우에 즉시 병합을 취소할 수 있도록 하기 위함입니다.
<img src="../images/git-reset-merge.png" alt="git reset merge"></p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-1"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-1">1</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-2"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-2">2</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-3"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-3">3</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-4"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-4">4</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git reset --merge ORIG_HEAD

<span style="color:#6272a4"># 위와 같은 효과를 냅니다.</span>
git reset --hard ORIG_HEAD
</code></pre></td></tr></table>
</div>
</div><p>위 명령은 바로 직전 병합을 취소하는 명령입니다. fast-forward병합이나 완전병합에서도 똑같이 먹힙니다.</p>
<h2 id="revert-없던일로-만들기2"><code>revert</code>: 없던일로 만들기2</h2>
<p><code>revert</code>명령은 기존의 커밋과 정확히 반대되는 커밋을 만듦니다.</p>
<p>예를 들어 A.txt에 2번 줄을 추가하는 커밋이 있다면 <code>revert</code>는 A.txt에 2번 줄을 빼는 커밋을 만듦니다.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-1"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-1">1</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-2"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-2">2</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-3"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-3">3</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-4"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-4">4</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-5"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-5">5</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># git revert [무력화할 commit]</span>
<span style="color:#6272a4"># commit 605f5e3 test2</span>
git revert 605f5e3

<span style="color:#6272a4"># 1c4d874 (HEAD -&gt; main) Revert &#34;test2&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>이전 commit들 중 605f5e3를 revert 시켰더니 HEAD에 새로운 commit 1c4d874이 생겼습니다.</p>
<p>사실 기존의 commit들을 <code>reset</code>으로 삭제하거나 변경하는 것 보다는 <code>revert</code>로 기존 commit을 무력화 시키는 것이 history관리 측에서 더 좋습니다. 혼자하는 프로젝트가 아니라 팀원들이 함께하는 프로젝트라면 더더욱 master 브랜치의 commit은 되도록 건들이지 않고 <code>revert</code>로 무력화만 시키는 것을 추천드립니다. 공유할 브랜치의 history를 바꿔버리면 팀원들에게 혼란만 일으킵니다.</p>
<h2 id="revert를-이용한-병합-취소"><code>revert</code>를 이용한 병합 취소</h2>
<p>병합 commit이 있다면(완전 병합으로 병합된 경우) <code>revert</code>를 이용해 쉽게 병합을 취소할 수 있습니다. 이때 <code>--mainline</code> 옵션으로 어느 브랜치를 남길지 결정할 수 있습니다.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-1"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-1">1</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git log --oneline --graph
</code></pre></td></tr></table>
</div>
</div><p>위 명령은 commit들을 그래프로 보여줘 어느 commit이 병합 commit인지 알 수 있게 해줍니다.</p>
<p><img src="../images/git-merge-revert.png" alt="git merge revert"></p>
<p>혹은 <code>git log --merges</code>로 merge commit만 모아볼 수도 있습니다.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-1"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-1">1</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git log --merges
</code></pre></td></tr></table>
</div>
</div><p>이제 merge를 <code>revert</code> 해봅시다.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-1"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-1">1</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-2"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-2">2</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># git revert --mainline [남길 line] [병합 commit]</span>
git revert --mainline <span style="color:#bd93f9">1</span> cb70c2d
</code></pre></td></tr></table>
</div>
</div><p>위 그림에서 직선인 왼쪽 그래프가 1번 라인, 오른쪽 그래프가 2번 라인이 됩니다. revert하면서 1번 라인을 남길지 2번 라인을 남길지 결정하면 됩니다.</p>
<p><img src="../images/git-merge-revert-2.png" alt="git merge revert 2"></p>
<p><code>revert</code>도 마찬가지로 충돌이 일어날 수 있습니다. 당황할 것 없이 merge할때 처럼 충돌을 해결하고 <code>git revert --continue</code> 해주시면 됩니다.</p>
<p>혹은 <code>revert</code>를 중단하고 싶다면 <code>git revert --abort</code>해주시면 됩니다.</p>
<h3 id="연속된-commit을-revert-하기">연속된 commit을 revert 하기</h3>
<p>연속된 commit들을 revert하려 한다면 한번에 revert해줄 수 있습니다.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-1"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-1">1</a>
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f" id="prefix-2"><a style="outline: none; text-decoration:none; color:inherit" href="#prefix-2">2</a>
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#6272a4"># git revert --no-commit [from commit]..[to commit] </span>
git revert --no-commit 605f5e3..402b4bf
</code></pre></td></tr></table>
</div>
</div><p>위 명령은 여러 연속된 commit을 revert하지만 하나의 commit만 생성되므로 history를 더 깔끔하게 관리할 수 있습니다.</p>
<h2 id="마치며">마치며</h2>
<p>다음 글에선 원격저장소의 연결을 관리하는 명령들에 대해 알아보겠습니다.</p>

    </article>
    <aside id="right-aside">
      <div class="post-toc card" id="post-toc">
    <div class="post-toc-title">
        <span>차례</span>
    </div>
    <div id="table">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#reset을-이용한-병합-취소"><code>reset</code>을 이용한 병합 취소</a></li>
    <li><a href="#revert-없던일로-만들기2"><code>revert</code>: 없던일로 만들기2</a></li>
    <li><a href="#revert를-이용한-병합-취소"><code>revert</code>를 이용한 병합 취소</a>
      <ul>
        <li><a href="#연속된-commit을-revert-하기">연속된 commit을 revert 하기</a></li>
      </ul>
    </li>
    <li><a href="#마치며">마치며</a></li>
  </ul>
</nav>
    </div>
</div>
    </aside>
  </section>
  <section id="section-move">
    <nav class="section-move">
    
      <a href="https://dev2820.github.io/study/git/git%EC%A0%95%EB%A6%AC-%EC%9E%91%EC%97%85-%EC%B7%A8%EC%86%8C%ED%95%98%EA%B8%B0/" class="previous card"> 
        <i class="fas fa-angle-double-left icon slide-left"></i>
        <div class="title">
          <small>prev</small>
          <span>[Git정리] 작업 취소하기</span>
        </div>
      </a>
    
    
      <a href="https://dev2820.github.io/study/git/git-%EC%A0%95%EB%A6%AC-%EC%9B%90%EA%B2%A9%EC%A0%80%EC%9E%A5%EC%86%8C%EC%99%80-%EC%97%B0%EA%B2%B0%ED%95%98%EA%B8%B0/" class="next card">
        <div class="title">
          <small>next</small>  
          <span>[Git 정리] 원격저장소와 연결하기</span>
        </div>
        <i class="fas fa-angle-double-right icon slide-right"></i>
      </a>
    
</nav>
  
  </section>
  <section id="meta">
    <div class="card">
      
      
<div class="category_breadcrumb_title">
    <h2 class="title"><i class="fas fa-folder icon"></i>Categories</h2>
</div>
<div class="category_breadcrumb">
    <a href="https://dev2820.github.io/categories/study" class="action name">
        
        study
    </a>
    <span class="action slash">/</span>
    
    <a href="https://dev2820.github.io/subcategories/git" class="action name">
        
        <span class="name">Git</span>     
    </a>
    
</div>


      <div class="tag_list_title">
    <h2 class="title"><i class="fas fa-hashtag icon"></i>Tags</h2>
</div>
<ul class="tags tag_list">
    
        <li><a href="https://dev2820.github.io/tags/study/" class="action"><i class="fas fa-hashtag icon"></i>study</a></li>
    
        <li><a href="https://dev2820.github.io/tags/%EC%BB%B4%ED%93%A8%ED%84%B0-%EA%B8%B0%EC%88%A0/" class="action"><i class="fas fa-hashtag icon"></i>컴퓨터 기술</a></li>
    
        <li><a href="https://dev2820.github.io/tags/%EA%B3%B5%EB%B6%80%EC%A0%95%EB%A6%AC/" class="action"><i class="fas fa-hashtag icon"></i>공부정리</a></li>
    
        <li><a href="https://dev2820.github.io/tags/git/" class="action"><i class="fas fa-hashtag icon"></i>git</a></li>
    
        <li><a href="https://dev2820.github.io/tags/%EB%B2%84%EC%A0%84%EA%B4%80%EB%A6%AC/" class="action"><i class="fas fa-hashtag icon"></i>버전관리</a></li>
    
</ul>

      <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "dev2820-github-io" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
  </section>
</main>

  <footer id="footer" class="bg-cover" style="background-image:url(/images/footer.png)">
    <button onclick="scrollToTop()" class="scroll-to-top card">
      <i class="fas fa-angle-double-up icon"></i>
    </button>
    <button onclick="scrollToBottom()" class="scroll-to-bottom card">
      <i class="fas fa-angle-double-down icon"></i>
    </button>
    
    <div class="center"><div class="share">
    <a href ="https://github.com/dev2820">
        <i class="fab fa-github icon"></i>
    </a>
    <a href ="https://mailto:second28200@gmail.com">
        <i class="fas fa-envelope icon"></i>
    </a> 
    <a href ="/index.xml">
        <i class="fas fa-rss icon"></i>
    </a>
</div><div class="copyright center">
        <span>COPYRIGHT 2021-2021. <a href="https://dev2820.github.io"> GIJO YANG (DEV2820).</a></span>
        <span>ALL RIGHTS RESERVED.</span>
      </div>
    </div>
  </footer>
</body>
</html>
  <script id="dsq-count-scr" src="//dev2820-github-io.disqus.com/count.js" async></script>
    </body>
</html>
